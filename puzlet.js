// Generated by CoffeeScript 1.3.3

/*
Puzlet Bootstrap
*/


(function() {
  var a, host, isLocalHost, loaderPath, loaderUrl, localLoaderUrl, localOrg, puzletLoaderUrl, puzletOrg, script;

  localOrg = "../../puzlet";

  puzletOrg = "http://puzlet.org";

  loaderPath = "/puzlet/js/loader.js";

  if (window.console == null) {
    window.console = {};
  }

  if (window.console.log == null) {
    window.console.log = (function() {});
  }

  console.log("Puzlet bootstrap");

  a = document.createElement("a");

  a.href = window.location.href;

  host = a.hostname;

  isLocalHost = host === "localhost";

  localLoaderUrl = localOrg + loaderPath;

  puzletLoaderUrl = puzletOrg + loaderPath;

  loaderUrl = isLocalHost ? localLoaderUrl : puzletLoaderUrl;

  console.log("Attempting to load " + loaderUrl + " (localhost).");

  script = document.createElement("script");

  script.setAttribute("type", "text/javascript");

  script.setAttribute("src", loaderUrl);

  script.onerror = function() {
    console.log("No loader.js found on localserver.  Loading " + puzletLoaderUrl + ".");
    script.setAttribute("src", puzletLoaderUrl);
    return document.head.appendChild(script);
  };

  document.head.appendChild(script);

}).call(this);
